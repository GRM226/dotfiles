# ============================================
# CONFIGURATION TMUX - Crème & Pastel
# ============================================

# ============================================
# OPTIONS DE BASE
# ============================================

# Terminal
set-option -g default-terminal 'screen-256color'
set-option -g terminal-overrides ',xterm-256color:RGB'

# Préfixe Ctrl+w
unbind C-b
set-option -g prefix C-w
bind-key C-w send-prefix

# Options générales
set -g base-index 1                    # Commencer à 1 au lieu de 0
setw -g pane-base-index 1              # Idem pour les panneaux
set -g detach-on-destroy off           # Ne pas quitter tmux en fermant une session
set -g escape-time 0                   # Pas de délai pour Escape
set -g history-limit 50000             # Historique (50k lignes)
set -g renumber-windows on             # Renuméroter les fenêtres automatiquement
set -g set-clipboard on                # Utiliser le clipboard système
set -g status-position top             # Barre de statut en haut

# ============================================
# RACCOURCIS CLAVIER
# ============================================

# Diviser les panneaux
bind | split-window -h -c "#{pane_current_path}"    # | pour diviser horizontalement
bind - split-window -v -c "#{pane_current_path}"    # - pour diviser verticalement

# Navigation entre panneaux avec Alt+jklm
bind -n M-h select-pane -L              # gauche
bind -n M-j select-pane -D              # bas
bind -n M-k select-pane -U              # haut
bind -n M-l select-pane -R              # droite

# Redimensionner avec Ctrl+Alt+flèches (repeatable)
bind -r M-Left resize-pane -L 5
bind -r M-Right resize-pane -R 5
bind -r M-Up resize-pane -U 5
bind -r M-Down resize-pane -D 5

# Recharger la config
bind r source-file ~/.tmux.conf \; display "✓ Config rechargée !"

# Tuer un panneau
bind x kill-pane

# Créer une nouvelle fenêtre
bind c new-window -c "#{pane_current_path}"

# Mode copie simple (compatible avec scroll terminal)
setw -g mode-keys vi

# Copie (pbcopy pour macOS)
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"
bind -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "pbcopy"

# ============================================
# THÈME - Crème & Pastel
# ============================================

# Couleurs
BG="#2D2D2D"
FG="#F5E6D3"
ACCENT="#A5C9E4"
ACCENT2="#E4B4D4"
ACCENT3="#B4E4B4"
ACCENT4="#F5E6A5"
GREY="#6D6D6D"
BORDER="#3D3D3D"

# Bordures des panneaux
set -g pane-border-style "fg=$BORDER,bg=default"
set -g pane-active-border-style "fg=$ACCENT,bg=default"

# Barre de statut
set -g status-style "bg=$BG,fg=$FG"
set -g status-left-length 40
set -g status-right-length 80

# Section gauche (session)
set -g status-left "#[fg=$ACCENT,bold] ✦ #S #[fg=$ACCENT2]│ "

# Section droite (répertoire et heure)
set -g status-right "#[fg=$ACCENT3]#{b:pane_current_path} #[fg=$GREY]│ #[fg=$ACCENT4,bold]%H:%M "

# Centrer les noms de fenêtres
set -g status-justify centre

# Fenêtres inactives
setw -g window-status-style "fg=$GREY,bg=$BG"
setw -g window-status-format " #I:#W "

# Fenêtre active
setw -g window-status-current-style "fg=$BG,bg=$ACCENT,bold"
setw -g window-status-current-format " #I:#W "

# Messages
set -g message-style "bg=$ACCENT,fg=$BG,bold"

# Mode copie
setw -g mode-style "bg=$ACCENT,fg=$BG"

# ============================================
# PLUGINS (Optionnel - Commenté par défaut)
# ============================================

# Décommente si tu veux utiliser TPM (Tmux Plugin Manager)
# set -g @plugin 'tmux-plugins/tpm'
# set -g @plugin 'tmux-plugins/tmux-sensible'
# set -g @plugin 'tmux-plugins/tmux-yank'

# run '~/.tmux/plugins/tpm/tpm'
